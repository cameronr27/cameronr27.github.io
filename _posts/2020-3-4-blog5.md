---
layout: post
title: Blog5
---

This week we were able to complete the creation of a virtual server  for the "Expired team." The process had always made sense to me
on which steps to do in order to create the VM but I needed help on minor things concerning LDAP and specific files located in the /etc path. 
When creating the new VM we started the regular process by entering all the required information such as ip address, network mask, and 
ssh installation. Once the required part is done, I entered the <sudo apt-get update && sudo apt-get upgrade> command from the command line
to ensure the latest packages were installed for our distro. Once that was finished I installed LDAP (Lightweight Directory Access Protocol)
It allows users to access data from another source. by using the following command <sudo apt install libpam-ldap libnss-ldap nss-updatedb> 
libnss-db nscd> I was brought to GUI that was for entering information that pertains to the expired server. Many popups will come up asking
for information databases, by entering the following values I was was able to complete this step:

LDAP URI which is needed to access the address and port of a directory server.  LDAP URL = ldaps://sdir.csun.edu is the required value.
LDAP Version: 3  . This version provides better functionality and is basically an improvement over LDAP version 2.
Make local Root DB Admin: No. This is optional and preference as to if you want root to be a DB admin
LDAP database require Login: Yes . Setting this to Yes requires users to login with their information. 
Unprivileged database user: BIND DN: cn=Pioneering,ou=Proxies,ou-Auth,o=csun. This relates to the user and user location in the LDAP directory tree
Enter bindpw:      The password is used to authenticate LDAP.

Once the LDAP setup is complete you have to start modifying files located in the /etc location. Use the command <sudo nano /etc/ldap.conf
and uncomment the port line and change it to the appropriate number. Further down in the same file you must uncomment tlscheckpeer and
change from yes to no. Enter sudo nano /etc/nsswitch.conf and match the following lines to these values

passwd:		files ldap
group:		files
shadow:		files
hosts:		files dns mdns4_minmal [NOTFOUND=return] mdns4
networks:		files
protocols:	files
services:		files
ethers:		files	
rpc:			files
netgroup: 	ldap nis


The next step is to edit the /etc/security/access.conf file this file contains information about groups. How you edit this file will be
important because it allows groups located on the server to either have access or none at all. At the bottom of the file by entering
the following information allows the specified groups to have access.

+ : expired : ALL
+ : storage : ALL
+ : tech+lab : ALL
- : ALL : ALL

After you want to edit the group file. Enter <sudo /etc/group> and modify it by entering the relevant ID values for the group name.
users:x:5000
tech+lab:x:8001:steve,akaplan,jeffw,lls9840
storage:x:8003:
expired:x:8004:

An important part on completing this is adding the groups to the sudoers file. You can access this by using the <sudo visudo> command.
It will open a file that will allow super user priviledges to the entered desired groups. An exmaple would be
%expired ALL=(ALL) ALL . This gives them super user permissions. 

The final step would be to restart the network by using the command <sudo service nscd restart && sudo service ssh restart> . If everything was input correctly the virtual machine should be able to allow others to ssh into it successfully.
